<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест API материалов</title>
</head>
<body>
    <h1>Тест API материалов</h1>
    
    <button onclick="testMaterialsAPI()">Проверить API материалов</button>
    <button onclick="testMaterialCreate()">Проверить создание материала</button>
    
    <div id="results"></div>

    <script>
    async function testMaterialsAPI() {
        try {
            const response = await fetch('/api/v1/materials');
            const data = await response.json();
            document.getElementById('results').innerHTML = 
                '<h3>Результат API материалов:</h3><pre>' + JSON.stringify(data, null, 2) + '</pre>';
        } catch (error) {
            document.getElementById('results').innerHTML = 
                '<h3>Ошибка:</h3><p>' + error.message + '</p>';
        }
    }

    async function testMaterialCreate() {
        const material = {
            article: "TEST001",
            material_type_id: 1,
            name: "Тестовый материал",
            description: "Описание тестового материала",
            measurement_unit_id: 1,
            package_quantity: 100.0,
            cost_per_unit: 50.0,
            stock_quantity: 0.0,
            min_stock_quantity: 10.0,
            image_path: ""
        };

        try {
            const response = await fetch('/api/v1/materials', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(material)
            });
            const data = await response.json();
            document.getElementById('results').innerHTML = 
                '<h3>Результат создания материала:</h3><pre>' + JSON.stringify(data, null, 2) + '</pre>';
        } catch (error) {
            document.getElementById('results').innerHTML = 
                '<h3>Ошибка создания:</h3><p>' + error.message + '</p>';
        }
    }
    </script>
</body>
</html> 