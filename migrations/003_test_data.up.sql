-- Миграция с тестовыми данными

-- Материалы
INSERT INTO materials (article, material_type_id, name, description, measurement_unit_id, package_quantity, cost_per_unit, stock_quantity, min_stock_quantity) VALUES
-- Основы
('MAT-001', 1, 'Флизелиновая основа премиум', 'Высококачественная флизелиновая основа', 1, 50.000, 150.00, 100.000, 20.000),
('MAT-002', 1, 'Виниловая основа стандарт', 'Стандартная виниловая основа', 1, 100.000, 120.00, 80.000, 15.000),
('MAT-003', 1, 'Бумажная основа эконом', 'Экономичная бумажная основа', 1, 200.000, 80.00, 150.000, 30.000),

-- Покрытия
('MAT-004', 2, 'Акриловое покрытие глянец', 'Глянцевое акриловое покрытие', 4, 25.000, 300.00, 50.000, 10.000),
('MAT-005', 2, 'Винил текстурный', 'Текстурное виниловое покрытие', 4, 30.000, 250.00, 40.000, 8.000),
('MAT-006', 2, 'Флизелин с тиснением', 'Флизелиновое покрытие с тиснением', 1, 40.000, 200.00, 60.000, 12.000),

-- Клеящие материалы
('MAT-007', 3, 'Клей ПВА модифицированный', 'Специальный клей для обоев', 4, 20.000, 180.00, 30.000, 5.000),
('MAT-008', 3, 'Полиуретановый клей', 'Высокопрочный клей', 2, 15.000, 350.00, 25.000, 4.000),

-- Красители
('MAT-009', 4, 'Пигмент синий', 'Органический синий пигмент', 2, 5.000, 500.00, 15.000, 3.000),
('MAT-010', 4, 'Пигмент красный', 'Органический красный пигмент', 2, 5.000, 480.00, 12.000, 2.500),
('MAT-011', 4, 'Пигмент золотой', 'Металлический золотой пигмент', 2, 2.000, 1200.00, 8.000, 1.500),

-- Упаковочные материалы
('MAT-012', 5, 'Картонная трубка', 'Трубка для рулонов', 3, 1.000, 50.00, 200.000, 50.000),
('MAT-013', 5, 'Полиэтиленовая пленка', 'Защитная пленка', 1, 100.000, 25.00, 300.000, 60.000),
('MAT-014', 5, 'Этикетки самоклеящиеся', 'Информационные этикетки', 3, 1000.000, 5.00, 5000.000, 1000.000);

-- Продукция
INSERT INTO products (article, product_type_id, name, description, min_partner_price, package_length, package_width, package_height, weight_without_package, weight_with_package, production_time_hours, cost_price, workshop_number, required_workers, roll_width) VALUES
-- Виниловые обои
('PRD-001', 1, 'Винил премиум "Розы"', 'Премиальные виниловые обои с рисунком роз', 1500.00, 1.100, 0.150, 0.150, 3.500, 4.200, 4.50, 800.00, 'ЦЕХ-1', 3, 1.060),
('PRD-002', 1, 'Винил классик "Геометрия"', 'Классические виниловые обои с геометрическим узором', 1200.00, 1.100, 0.150, 0.150, 3.200, 3.800, 4.00, 650.00, 'ЦЕХ-1', 2, 1.060),

-- Флизелиновые обои
('PRD-003', 2, 'Флизелин люкс "Дамаск"', 'Флизелиновые обои люкс класса с дамасским узором', 2200.00, 1.100, 0.150, 0.150, 2.800, 3.400, 5.00, 1100.00, 'ЦЕХ-2', 4, 1.060),
('PRD-004', 2, 'Флизелин эко "Листья"', 'Экологичные флизелиновые обои с растительным орнаментом', 1800.00, 1.100, 0.150, 0.150, 2.600, 3.200, 4.20, 900.00, 'ЦЕХ-2', 3, 1.060),

-- Бумажные обои
('PRD-005', 3, 'Бумага классик "Полоска"', 'Классические бумажные обои в полоску', 800.00, 1.100, 0.120, 0.120, 1.500, 2.000, 2.50, 400.00, 'ЦЕХ-3', 2, 0.530),
('PRD-006', 3, 'Бумага детская "Зверята"', 'Детские бумажные обои с изображением животных', 900.00, 1.100, 0.120, 0.120, 1.600, 2.100, 3.00, 450.00, 'ЦЕХ-3', 2, 0.530),

-- Текстильные обои
('PRD-007', 4, 'Текстиль престиж "Шелк"', 'Престижные текстильные обои под шелк', 4500.00, 1.100, 0.180, 0.180, 4.200, 5.000, 8.00, 2200.00, 'ЦЕХ-4', 5, 1.000),
('PRD-008', 4, 'Текстиль арт "Лен"', 'Артистические текстильные обои под лен', 3800.00, 1.100, 0.180, 0.180, 3.800, 4.600, 7.00, 1800.00, 'ЦЕХ-4', 4, 1.000);

-- Связи продукции с материалами (рецептуры)
INSERT INTO product_materials (product_id, material_id, quantity_per_unit) VALUES
-- PRD-001 (Винил премиум "Розы")
(1, 2, 1.200000),  -- Виниловая основа
(1, 4, 0.800000),  -- Акриловое покрытие глянец
(1, 7, 0.150000),  -- Клей ПВА
(1, 10, 0.050000), -- Пигмент красный
(1, 12, 1.000000), -- Картонная трубка
(1, 13, 1.500000), -- Полиэтиленовая пленка

-- PRD-003 (Флизелин люкс "Дамаск")
(3, 1, 1.100000),  -- Флизелиновая основа премиум
(3, 6, 0.900000),  -- Флизелин с тиснением
(3, 8, 0.120000),  -- Полиуретановый клей
(3, 11, 0.030000), -- Пигмент золотой
(3, 12, 1.000000), -- Картонная трубка
(3, 13, 1.500000), -- Полиэтиленовая пленка

-- PRD-005 (Бумага классик "Полоска")
(5, 3, 1.000000),  -- Бумажная основа эконом
(5, 9, 0.040000),  -- Пигмент синий
(5, 7, 0.100000),  -- Клей ПВА
(5, 12, 1.000000), -- Картонная трубка
(5, 13, 1.000000); -- Полиэтиленовая пленка

-- Поставщики
INSERT INTO suppliers (name, inn, contact_info, rating) VALUES
('ООО "Химпром-Материалы"', '123456789012', 'Тел: +7 (495) 123-45-67, Email: info@himprom.ru', 8),
('АО "Полимер-Сервис"', '234567890123', 'Тел: +7 (812) 234-56-78, Email: sales@polymer.ru', 9),
('ИП Сидоров А.В.', '345678901234', 'Тел: +7 (903) 345-67-89, Email: sidorov@mail.ru', 7),
('ООО "ЭкоМатериалы"', '456789012345', 'Тел: +7 (499) 456-78-90, Email: eco@materials.ru', 6);

-- Партнеры
INSERT INTO partners (partner_type_id, company_name, legal_address, inn, director_name, phone, email, rating, total_sales) VALUES
(1, 'ООО "Строй-Декор"', 'г. Москва, ул. Строительная, д. 15', '111222333444', 'Петров Иван Сергеевич', '+7 (495) 111-22-33', 'petrov@stroy-dekor.ru', 8, 2500000.00),
(2, 'АО "МегаСтрой"', 'г. СПб, пр. Невский, д. 100', '222333444555', 'Сидорова Анна Петровна', '+7 (812) 222-33-44', 'sidorova@megastroy.ru', 9, 5800000.00),
(3, 'ИП Козлов В.А.', 'г. Казань, ул. Баумана, д. 25', '333444555666', 'Козлов Владимир Александрович', '+7 (843) 333-44-55', 'kozlov@internet-shop.ru', 7, 1200000.00),
(4, 'ООО "РемонтПро"', 'г. Екатеринбург, ул. Ленина, д. 50', '444555666777', 'Новикова Елена Викторовна', '+7 (343) 444-55-66', 'novikova@remontpro.ru', 6, 800000.00);

-- Точки продаж партнеров
INSERT INTO partner_sales_points (partner_id, name, address, sales_type) VALUES
(1, 'Салон "Строй-Декор" на Арбате', 'г. Москва, ул. Арбат, д. 25', 'розница'),
(1, 'Склад-магазин "Строй-Декор"', 'г. Москва, МКАД 108 км', 'опт'),
(2, 'Гипермаркет "МегаСтрой"', 'г. СПб, ул. Дыбенко, д. 12', 'розница'),
(3, 'Интернет-магазин обоев', 'онлайн', 'интернет'),
(4, 'Офис "РемонтПро"', 'г. Екатеринбург, ул. Ленина, д. 50', 'опт');

-- Сотрудники
INSERT INTO employees (first_name, last_name, middle_name, birth_date, passport_series, passport_number, bank_details, has_family, health_status) VALUES
('Александр', 'Иванов', 'Петрович', '1985-03-15', '4515', '123456', 'Сбербанк: 40817810555551234567', true, 'здоров'),
('Мария', 'Петрова', 'Сергеевна', '1990-07-22', '4516', '234567', 'ВТБ: 40817810666661234568', false, 'здоров'),
('Дмитрий', 'Сидоров', 'Владимирович', '1982-11-08', '4517', '345678', 'Альфа-Банк: 40817810777771234569', true, 'здоров'),
('Анна', 'Козлова', 'Игоревна', '1993-01-30', '4518', '456789', 'Тинькофф: 40817810888881234570', false, 'здоров');

-- История продаж
INSERT INTO sales_history (partner_id, product_id, quantity, unit_price, total_amount, sale_date) VALUES
(1, 1, 50, 1500.00, 75000.00, '2024-01-15'),
(1, 3, 30, 2200.00, 66000.00, '2024-02-20'),
(2, 1, 100, 1450.00, 145000.00, '2024-01-10'),
(2, 2, 80, 1150.00, 92000.00, '2024-02-05'),
(3, 5, 200, 780.00, 156000.00, '2024-03-01'),
(4, 6, 150, 850.00, 127500.00, '2024-03-15');

-- Заявки
INSERT INTO orders (partner_id, manager_id, status, total_amount, prepayment_amount, delivery_required, delivery_address) VALUES
(1, 1, 'completed', 150000.00, 45000.00, true, 'г. Москва, ул. Арбат, д. 25'),
(2, 2, 'in_production', 200000.00, 100000.00, true, 'г. СПб, пр. Невский, д. 100'),
(3, 3, 'confirmed', 75000.00, 22500.00, false, null),
(4, 4, 'created', 50000.00, 0.00, true, 'г. Екатеринбург, ул. Ленина, д. 50');

-- Позиции заявок
INSERT INTO order_items (order_id, product_id, quantity, unit_price, total_price, production_deadline) VALUES
(1, 1, 60, 1500.00, 90000.00, '2024-04-01'),
(1, 5, 75, 800.00, 60000.00, '2024-04-01'),
(2, 3, 50, 2200.00, 110000.00, '2024-04-15'),
(2, 7, 20, 4500.00, 90000.00, '2024-04-20'),
(3, 2, 50, 1200.00, 60000.00, '2024-04-10'),
(3, 6, 20, 750.00, 15000.00, '2024-04-10'),
(4, 5, 50, 800.00, 40000.00, '2024-04-05'),
(4, 6, 15, 666.67, 10000.00, '2024-04-05');

-- История поставок материалов
INSERT INTO material_supplies (supplier_id, material_id, quantity, unit_price, total_amount, supply_date) VALUES
(1, 1, 100.000, 145.00, 14500.00, '2024-01-01'),
(1, 4, 50.000, 290.00, 14500.00, '2024-01-05'),
(2, 2, 150.000, 115.00, 17250.00, '2024-01-10'),
(2, 8, 30.000, 340.00, 10200.00, '2024-01-15'),
(3, 9, 20.000, 480.00, 9600.00, '2024-02-01'),
(4, 13, 500.000, 22.00, 11000.00, '2024-02-05');

-- Движение материалов на складе
INSERT INTO material_movements (material_id, movement_type, quantity, remaining_quantity, reference_id, reference_type, note) VALUES
(1, 'income', 100.000, 100.000, 1, 'supply', 'Поставка от ООО "Химпром-Материалы"'),
(1, 'consumption', 60.000, 40.000, 1, 'order', 'Расход на заказ №1'),
(4, 'income', 50.000, 50.000, 2, 'supply', 'Поставка акрилового покрытия'),
(4, 'consumption', 25.000, 25.000, 1, 'order', 'Расход на производство'); 